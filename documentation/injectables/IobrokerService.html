<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>iobroker.homeoverview documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">iobroker.homeoverview documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>IobrokerService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/iobroker.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Handels the connection to the ioBroker with help of the /lib/ioBrokerConnection.ts</p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#isConnected$">isConnected$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#liveHost$">liveHost$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#newError$">newError$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#servConn">servConn</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updatedObject$">updatedObject$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updatedState$">updatedState$</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getConfig">getConfig</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getEnums">getEnums</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getIsConnected">getIsConnected</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getLiveHost">getLiveHost</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getNewError">getNewError</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getObjects">getObjects</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getStates">getStates</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getUpdatedObject">getUpdatedObject</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getUpdatedState">getUpdatedState</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#setState">setState</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(socket: Socket)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="45" class="link-to-prism">src/app/iobroker.service.ts:45</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>init ioBroker connection and listen to some emit callbacks </p>
<ul>
<li>onObjectChange</li>
<li>onConnChange</li>
<li>onStateChange</li>
<li>onRefresh (only console log till now)</li>
<li>onAuth (only console log till now)</li>
<li>onCommand (only console log till now)</li>
<li>onError</li>
</ul>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>socket</td>
                                                  
                                                        <td>
                                                                    <code>Socket</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getConfig"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getConfig
                        </b>
                        <a href="#getConfig"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getConfig()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="205"
                            class="link-to-prism">src/app/iobroker.service.ts:205</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns all configs as Promise</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>with ioBroker configs</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getEnums"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getEnums
                        </b>
                        <a href="#getEnums"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getEnums()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="185"
                            class="link-to-prism">src/app/iobroker.service.ts:185</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns all enums as Promise</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>enum]&gt;} with ioBroker enums</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getIsConnected"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getIsConnected
                        </b>
                        <a href="#getIsConnected"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getIsConnected()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="114"
                            class="link-to-prism">src/app/iobroker.service.ts:114</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>get connection state observer</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Subject&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>isConnected</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getLiveHost"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getLiveHost
                        </b>
                        <a href="#getLiveHost"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getLiveHost()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="96"
                            class="link-to-prism">src/app/iobroker.service.ts:96</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns the liveHost Name as Observer</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>liveHost</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNewError"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getNewError
                        </b>
                        <a href="#getNewError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getNewError()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="225"
                            class="link-to-prism">src/app/iobroker.service.ts:225</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns Error Message Observer</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Subject&lt;string&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>error Message</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getObjects"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getObjects
                        </b>
                        <a href="#getObjects"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getObjects()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="165"
                            class="link-to-prism">src/app/iobroker.service.ts:165</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns all objects as Promise</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>with ioBroker objects</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStates"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getStates
                        </b>
                        <a href="#getStates"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getStates(ids)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="145"
                            class="link-to-prism">src/app/iobroker.service.ts:145</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns all states fits the ids filter as Promise</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ids</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>ioBroker id filter</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>with ioBroker states</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUpdatedObject"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getUpdatedObject
                        </b>
                        <a href="#getUpdatedObject"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUpdatedObject()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="136"
                            class="link-to-prism">src/app/iobroker.service.ts:136</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Get an observer for ioBroker object update</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Subject&lt;&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>all object updates</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUpdatedState"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getUpdatedState
                        </b>
                        <a href="#getUpdatedState"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUpdatedState()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="124"
                            class="link-to-prism">src/app/iobroker.service.ts:124</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Get an observer for ioBroker state update</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Subject&lt;&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>all state updates</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setState"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            setState
                        </b>
                        <a href="#setState"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setState(id, value)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="234"
                            class="link-to-prism">src/app/iobroker.service.ts:234</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Sets a ioBroker state</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>ioBroker id</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>value</td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>new value for the ioBroker id</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="isConnected$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            isConnected$</b>
                            <a href="#isConnected$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Subject&lt;boolean&gt;</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new BehaviorSubject&lt;boolean&gt;(false)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">src/app/iobroker.service.ts:37</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>observer if the connection is established </p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="liveHost$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            liveHost$</b>
                            <a href="#liveHost$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Subject&lt;string&gt;</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new BehaviorSubject&lt;string&gt;(&#x27;&#x27;)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="45" class="link-to-prism">src/app/iobroker.service.ts:45</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>current liveHost observer </p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="newError$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            newError$</b>
                            <a href="#newError$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Subject&lt;string&gt;</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new BehaviorSubject&lt;string&gt;(null)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="43" class="link-to-prism">src/app/iobroker.service.ts:43</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>current error observer </p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="servConn"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            servConn</b>
                            <a href="#servConn"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>IOBrokerConnection</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/app/iobroker.service.ts:34</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>connection to ioBroker --&gt; see ioBroker socket.io adapter </p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="updatedObject$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            updatedObject$</b>
                            <a href="#updatedObject$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Subject&lt;&gt;</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new BehaviorSubject&lt;[string, any]&gt;([null, null])</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">src/app/iobroker.service.ts:41</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>current object observer </p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="updatedState$"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            updatedState$</b>
                            <a href="#updatedState$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Subject&lt;&gt;</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new BehaviorSubject&lt;[string, any]&gt;([null, null])</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="39" class="link-to-prism">src/app/iobroker.service.ts:39</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                        <div class="io-description"><p>current states observer </p>
</div>
                    </td>
                </tr>

            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { Subject, BehaviorSubject, of } from &#x27;rxjs&#x27;;
import { bindCallback} from &#x27;rxjs&#x27;;
import { Socket, SocketIoConfig } from &#x27;ngx-socket-io&#x27;;
import { map } from &#x27;rxjs/operators&#x27;;

import {IOBrokerConnection} from &#x27;../lib/ioBrokerConnection&#x27;;
import { Identifiers } from &#x27;@angular/compiler&#x27;;

/** ioBroker adapter namespace */
const namespace &#x3D; &#x27;homeOverview.0&#x27;;
/** ioBroker url */
const url &#x3D; &#x27;http://192.168.90.1:8082&#x27;; // user in app.module to connect the socket
/** socket.io connection configuration */
export const config: SocketIoConfig &#x3D; { url, options: {
  query:                          &#x27;key&#x3D;&#x27;,
  reconnectionDelay:              10000,
  reconnectionAttempts:           Infinity,
  reconnection:                   true,
  forceNew:                       true,
  transports:                     [&#x27;websocket&#x27;]
} };

/**
 * Handels the connection to the ioBroker with help of the /lib/ioBrokerConnection.ts
 */
@Injectable({
  providedIn: &#x27;root&#x27;
})

export class IobrokerService {

  /** connection to ioBroker --&gt; see ioBroker socket.io adapter */
  private servConn: IOBrokerConnection;

  /** observer if the connection is established */
  private isConnected$: Subject&lt;boolean&gt; &#x3D; new BehaviorSubject&lt;boolean&gt;(false);
  /** current states observer */
  private updatedState$: Subject&lt;[string, any]&gt; &#x3D; new BehaviorSubject&lt;[string, any]&gt;([null, null]);
  /** current object observer */
  private updatedObject$: Subject&lt;[string, any]&gt; &#x3D; new BehaviorSubject&lt;[string, any]&gt;([null, null]);
  /** current error observer */
  private newError$: Subject&lt;string&gt; &#x3D; new BehaviorSubject&lt;string&gt;(null);
  /** current liveHost observer */
  private liveHost$: Subject&lt;string&gt; &#x3D; new BehaviorSubject&lt;string&gt;(&#x27;&#x27;);

  /**
   * init ioBroker connection and listen to some emit callbacks 
   *  - onObjectChange
   *  - onConnChange
   *  - onStateChange
   *  - onRefresh (only console log till now)
   *  - onAuth (only console log till now)
   *  - onCommand (only console log till now)
   *  - onError
   * @param socket 
   */
  constructor(private socket: Socket) {
    this.servConn &#x3D; new IOBrokerConnection(namespace, this.socket);
    this.servConn.init({
      onObjectChange: (id, obj)&#x3D;&gt; {
        this.updatedObject$.next([id, obj]);
      },
      onConnChange: (isConnected) &#x3D;&gt; {
        this.isConnected$.next(isConnected);
      },
      onStateChange: (id, state) &#x3D;&gt; {
        this.updatedState$.next([id, state]);
      },
      onRefresh: () &#x3D;&gt; {
        console.log(&#x27;ioBrokerConnection:onRefresh&#x27;);
      },
      onAuth: () &#x3D;&gt; {
        console.log(&#x27;ioBrokerConnection:onAuth&#x27;);
      },
      onCommand: (instance, command, data) &#x3D;&gt; {
        console.log(&#x27;ioBrokerConnection:onCommand&#x27;);
      },
      onError: (err) &#x3D;&gt; {
        console.error(&#x27;ioBrokerConnection:onError&#x27;);
        this.newError$.next(err);
      },
    }, true);
  }

  /** @ignore */
  public getObjectTree(): Subject &lt; string &gt; {
    console.log(&#x27;Service: getObjectTree&#x27;);
    return new BehaviorSubject&lt; string &gt;(&#x27;ioBroker&#x27;);
  }

  /**
   * Returns the liveHost Name as Observer
   * @returns {Observer} liveHost
   */
  public getLiveHost(){
    const waitConnected &#x3D; () &#x3D;&gt; {
      if (!this.servConn.getIsConnected()) {
        setTimeout(waitConnected, 50);
      } else {
        this.servConn.getLiveHost((hostName) &#x3D;&gt; {
          this.liveHost$.next(hostName);
        })
      }
    };
    waitConnected();
    return this.liveHost$;
  }

  /**
   * get connection state observer
   * @returns {Observer} isConnected
   */
  public getIsConnected(): Subject &lt; boolean &gt; {
    // console.log(this.result1);
    return this.isConnected$;
    // return this.socket.fromEvent(&#x27;connect&#x27;);
  }

  /**
   * Get an observer for ioBroker state update
   * @returns {Observer&lt;[string, any]&gt; } all state updates
   */
  public getUpdatedState(): Subject&lt;[string, any]&gt;  {
    return this.updatedState$;
    // return new Observable&lt; any &gt;(observer &#x3D;&gt; {
    //   this.socket.on(&#x27;stateChange&#x27;, (id, state) &#x3D;&gt; observer.next([id, state]));
    // });

  }

  /**
   * Get an observer for ioBroker object update
   * @returns {Observer&lt;[string, any]&gt; } all object updates
   */
  public getUpdatedObject(): Subject&lt;[string, any]&gt;  {
    return this.updatedObject$;
  }

  /**
   * Returns all states fits the ids filter as Promise
   * @param ids ioBroker id filter
   * @returns {Promise&lt;[id,state]&gt;} with ioBroker states
   */
  public getStates(ids) {
    return new Promise((resolve, reject) &#x3D;&gt; {
      const waitConnected &#x3D; () &#x3D;&gt; {
        if (!this.servConn.getIsConnected()) {
          setTimeout(waitConnected, 50);
        } else {
          this.servConn.getStates(ids, (err, data) &#x3D;&gt; {
            if (err) { reject(err); }
            resolve(data);
          });
        }
      };
      waitConnected();
    });
  }

  /**
   * Returns all objects as Promise
   * @returns {Promise&lt;[id,object]&gt;} with ioBroker objects
   */
  public getObjects() {
    return new Promise((resolve, reject) &#x3D;&gt; {
      const waitConnected &#x3D; () &#x3D;&gt; {
        if (!this.servConn.getIsConnected()) {
          setTimeout(waitConnected, 50);
        } else {
          this.servConn.getObjects((err, data) &#x3D;&gt; {
            if (err) { reject(err); }
            resolve(data);
          });
        }
      };
      waitConnected();
    });
  }

  /**
   * Returns all enums as Promise
   * @returns {Promise&lt;[id, enum]&gt;} with ioBroker enums
   */
  public getEnums() {
    return new Promise((resolve, reject) &#x3D;&gt; {
      const waitConnected &#x3D; () &#x3D;&gt; {
        if (!this.servConn.getIsConnected()) {
          setTimeout(waitConnected, 50);
        } else {
          this.servConn.getEnums(&#x27;&#x27;, (err, data) &#x3D;&gt; {
            if (err) { reject(err); }
            resolve(data);
          });
        }
      };
      waitConnected();
    });
  }

  /**
   * Returns all configs as Promise
   * @returns {Promise&lt;[id, config]&gt;} with ioBroker configs
   */
  public getConfig() {
    return new Promise((resolve, reject) &#x3D;&gt; {
      const waitConnected &#x3D; () &#x3D;&gt; {
        if (!this.servConn.getIsConnected()) {
          setTimeout(waitConnected, 50);
        } else {
          this.servConn.getConfig((err, data) &#x3D;&gt; {
            if (err) { reject(err); }
            resolve(data);
          });
        }
      };
      waitConnected();
    });
  }

  /**
   * Returns Error Message Observer
   * @returns {Observer&lt;string&gt;} error Message
   */
  public getNewError(): Subject&lt;string&gt;  {
    return this.newError$;
  }

  /**
   * Sets a ioBroker state
   * @param {string} id ioBroker id
   * @param {any} value new value for the ioBroker id
   */
  public setState(id, value): void {
    this.servConn.setState(id, value, (err) &#x3D;&gt; {});
  }
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'IobrokerService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
